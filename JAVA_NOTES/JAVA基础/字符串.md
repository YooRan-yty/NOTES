# 1.API概述

Application Programming Interface：应用程序接口；

JAVA API：JDK中提供各种功能的Java类；



# 2.String

## 2.1概述

1. JAVA程序中，所有的“”字符串，都是String的对象；
2. 字符串是常量，他们的值在创建后不能更改；

```java
String name = "张三"; //new方法没有显示，但实际存在，在堆内存中开辟了空间存放数据；
name = "李四"; //也存在new方法，但没显示，实际上在堆内存中开辟了新的空间。“张三”的值没有改变，而是name指向了新的地址；
```



## 2.1 String构造方法

|             方法名             |                         说明                         |
| :----------------------------: | :--------------------------------------------------: |
|        public String()         |           创建空白字符串对象，不含任何内容           |
|   public String(char[] chs)    |          根据字符数组的内容，创建字符串对象          |
| public String(String original) |         根据传入的字符串内容，创建字符串对象         |
|       String s = " .. "        | 直接赋值的方式创建字符串对象，内容就是双引号中的内容 |

```java
//1.
String name = new String();

//2.
char[] ch = {'a','b','c'};
String name = new String(ch);

//3.
String name = new String("abc");

//4.
String name = "abc";
```

## 2.2 String字符串创建的对比

1. 使用""方式，给出的字符串，只要字符序列相同（顺序、大小写），无论在程序中出现几次，JVM都只会创建一个String对象，并在**字符串常量池**中维护；

   1. 字符串常量池：当使用 "" 创建字符串对象时，系统会检查该字符串是否在字符串常量池中存在；(jdk7之后在堆内存中，之前在方法区中)
      1. 不存在：创建；
      2. 存在：不会重新创建，直接复用；

   ```java
   String s1 = "abc"; //创建字符串对象“abc”,系统检查常量池，不存在，创建字符串，生成内存地址，s1指向内存地址；
   String s2 = "abc";//创建字符串对象“abc",系统检查常量池，存在，s2直接指向内存地址；
   sout(s1==s2); --> true
   ```

2. 使用new创建的字符串对象，每一次new都会申请一个内存空间，虽然内容相同，但是地址不同；

   ```java
   char[] chs = {'a','b'}; //创建数组对象，通过new在堆内存中开辟了内存空间，并将字符放入空间，返回地址值；
   String s1 = new String(chs); //使用new方法，堆内存中开辟空间，使用了chs数组创建对象，此内存中会记录chs数组的内存地址，内部会将字符转换为字符串；返回内存地址；
   String s2 = new String(chs);//使用new方法，堆内存中开辟空间，使用了chs数组创建对象，内存中会记录chs数组的内存地址，在内部将字符转换为字符串；返回内存地址；
   //s1 与 s2 都通过new开辟了新的空间，地址值不同；
   ```

   ![](/Users/tyy/NOTES/JAVA_NOTES/图片/:Users:tyy:Desktop:截屏2022-07-06 下午12.00.09.png)

3. 常见问题

   1. ```java
      String s1 = "abc";
      String s2 = "abc";
      s1 == s2 --> true
      ```

   2. ```java
      String s1 = "abc";
      String s2 = new String("abc"); //这一句代码会创建2个对象；
      s1 == s2 --> false
       //s1指向字符串常量池中的内存地址，s2指向堆内存的内存地址；
      ```

   3. ```java
      String s1 = "abc"; //创建对象s1，系统检查常量池，不存在，创建字符串对象；返回地址值；
      String s2 = "ab"; //创建对象s2，系统检查常量池，不存在，创建字符串对象；放回地址值；
      String s3 = s2 + "c"; //创建对象s3，检查常量池，"c"不存在，创建字符串对象；
      //当使用字符串拼接时，JAVA会在堆内存中创建StringBuilder对象，并开辟空间，然后自动调用此对象的方法，在空间中完成字符串的拼接；完成后，依旧是StringBuilder类型，需要转换类型。自动调用toString方法进行转换，开辟空间，将转换好的数据存放此空间中；返回地址值；s3指向此地址；
      s1 == s3 --> false
        //s1指向字符串常量池中的内存地址，s3指向堆内存的内存地址；
      ```

      ![](/Users/tyy/NOTES/JAVA_NOTES/图片/:Users:tyy:Desktop:截屏2022-07-06 下午12.15.15.png)

  4.   ```java
       String s1 = "abc";
       String s2 = "a" + "b" + "c";
       s1 == s2 --> true
       //JAVA常量优化机制，编译时会自动拼接为"abc",并指向常量池；
       ```

## 2.3 String的比较

1. 使用==作比较：
   1. 基本数据类型：比较**数据值**是否相同；
   2. 引用数据类型：比较**地址值**是否相同；