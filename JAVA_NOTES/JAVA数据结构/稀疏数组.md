# 1.稀疏数组

## 1.1 稀疏数组的应用场景

- 实际需求：五子棋程序，需要记录每一颗棋子的位置。

## 1.2 基本介绍

- 当一个数组中，大部分元素为0，或为同一个值的数组时，可以使用稀疏数组来保存该数组
- 稀疏数组的处理方式
  - 1.记录数据有几行几列，有多少个不同的值
  - 2.将具有不同值的元素的行、列、值记录在一个小规模的数组中，从而缩小程序的规模

![](https://tva1.sinaimg.cn/large/e6c9d24egy1h48i9i6buij21600pcaef.jpg)

## 1.3 实现思路

### 1.3.1 二维数组转稀疏数组的思路

1. 遍历原始的二维数组，得到有效数据的个数 sum
2. 根据sum创建稀疏数组spareArray `int[sum+1][3]`
   - sum+1:sum是不同数据的个数，+1是因为稀疏数组的第一行是固定的内容
   - 3：列数固定，分别是行数列、列数列、值列
3. 将二维数组的有效数据存入稀疏数组中

### 1.3.2 稀疏数组转原始的二维数组的思路

1. 先读取稀疏数组的第一行，获取到原始二维数组的行列数量，创建二维数组
2. 读取稀疏数组的后几行数组，赋值给二维数组，即可完成转换

## 1.4 代码实现

### 1.4.1 创建二维数组

```java
int[][] arr1 = new int[11][11];
arr1[1][2] = 1;//模拟两颗棋子
arr1[2][3] = 2;
```

### 1.4.2 遍历二维数组，得到不同数据的个数

```java
int count = 0; //定义变量，用于统计个数
for(int i=0;i<arr1.length;i++){  //遍历二维数组
  int[] temp = arr1[i];
  for(int j=0;j<temp.length;j++){
    if(temp[j] != 0){
      count++:
    }
  }
}
```

### 1.4.3 创建稀疏数组

```java
int[][] spareArr = new int[count+1][3];  //创建稀疏数组，因为第一行固定存放二维数组的行数、列数、不通知个数，所以在count个数的基础上+1；稀疏数组固定3列；
spareArr[0][0] = 11; //向稀疏数组第一行赋值
spareArr[0][1] = 11;
spareArr[0][2] = count;
```

### 1.4.4 将二维数组中非零的元素添加到稀疏数组中

```java
int index = 1; //定义变量，作为稀疏数组的行号;默认为1，即从稀疏数组的第二行开始插入数据
for(int i=0;i<arr1.length;i++){ //遍历二维数组，找出非零的元素
  int[] temp = arr1[i];
  for(int j=0;j<temp.length;j++){
    if(temp[j] != 0){
      spareArr[index][0] = i;  //非零则插入数据
      spareArr[index][1] = j;
      spareArr[index][2] = temp[j];
      index++; //插入完成后，稀疏数组的行号+1，即指向稀疏数组的下一行，准备录入下一个非零元素的数据
    }
  }
}
```

### 1.4.5 将稀疏数组转回二维数组

```java
int[][] arr2 = new int[spareArr[0][0]][spareArr[0][1]]; //通过直接获取稀疏数组第一行的值，可以得到二维数组的大小，进行创建
for(int i=1;i<spareArr.length;i++){ //对稀疏数组进行遍历，从第二行开始获取数据，即i=1；
  int row = spareArr[i][0]; 
  int col = spareArr[i][1];
  arr2[row][col] = spareArr[i][3];
}
```

